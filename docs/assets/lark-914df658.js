/* empty css               *//* empty css                  */import{p as A}from"./index-cf52f176.js";import{_ as J,E as j,a as Z,b as Q,c as U,d as q,r as O,o as G,u as K,f as V,g as H,w as D,h as b,i as v,t as W,n as $,p as X,m as Y,j as B}from"./index-1110cd3f.js";import{A as tt,C as at,T as et}from"./TwoFA-b9aad786.js";const L=async l=>await A.base.getTableByName(l),S=async(l,m)=>await(await(await L(l)).getFieldByName(m)).getFieldValueList(),T=async(l,m)=>{const d=await l.getRecordIdList();d&&d.length&&await l.deleteRecords(d.slice(0,5e3))},z=async()=>{const l=await A.base.getSelection();return await(await A.base.getTableById(l.tableId)).getName()},M=async(l,m)=>await(await L(l)).getRecords({pageSize:5e3}),st={components:{ElButton:j,ElForm:Z,ElFormItem:Q,ElSelect:U,ElOption:q},setup(){const l=O(""),m=O([]);O([]),O({});const d="资产状态总览",s={pack:{name:"包ID",status:"包状态",nameId:"xxx",statusId:"xxx",tableName:"app",childName:"bm"},bm:{name:"BMID",status:"BM状态",tableName:"BM",parent:"pack",childName:"ads"},ads:{name:"广告账户ID",status:"广告账户状态",tableName:"广告账户",parent:"bm",childName:"fans",packId:"包ID"},fans:{name:"粉丝页ID",status:"粉丝页的状态",tableName:"广告账户粉丝页",parent:"ads",adsTableName:"广告账户粉丝页",adsId:"",childName:"person"},person:{name:"个人号ID",status:"个人号的状态",tableName:"粉丝页个人号",parent:"fans",childName:""}};let k={pack:[{}]};const E=async()=>{if(await z()===d){let N=function(t){t.forEach(e=>{if(e.childName){e.child=[];for(let a of k[e.childName])if(e.id.text==a.parentId.text){if(a.packId&&e.parentId.text!==a.packId.text)continue;a.adsId?w.forEach(r=>{r.fans==a.id.text&&r.ads==e.parentId.text&&e.child.push(a)}):e.child.push(a)}N(e.child)}})};const o=["fldamqjgCi","fldxs3m5oK","flds2sw1zl","fldpZOIUJs","fldYDmwkFW","fldOtNEMD7","fldODZOISb","fldZKS0Qrl","fldlPGwOHc","fldU13dDiD"],f=await L(d);await T(f),s.pack.nameId=o[0];let p=0;for(let t in s){if(p++,t=="pack"){s[t].statusId=o[p];continue}s[t].nameId=o[p],p++,s[t].statusId=o[p]}let w=[];for(let t in s){const e=await S(s[t].tableName,s[t].name),a=await S(s[t].tableName,s[t].status);let r=null,i=null;const _=s[t].parent;_&&(r=await S(s[t].tableName,s[_].name)),t=="ads"&&(i=await S(s[t].tableName,s[t].packId)),k[t]=[];for(let u=0;u<e.length;u++)for(let x=0;x<a.length;x++)if(e[u].record_id==a[x].record_id){let R={record_id:e[u].record_id,id:e[u].value[0],status:a[x].value instanceof Array?a[x].value[0]:a[x].value,nameId:s[t].nameId,statusId:s[t].statusId,childName:s[t].childName};if(i)for(let h=0;h<i.length;h++)i[h].record_id==e[u].record_id&&(R.packId=i[h].value[0]);if(r)for(let h=0;h<r.length;h++)r[h].record_id==e[u].record_id&&(R.parentId=r[h].value[0]);k[t].push(R)}}const y=JSON.parse(JSON.stringify(k.pack)),n=[];N(y);const c=async(t,e)=>{for(const a of t){let i={fields:{...{[a.nameId]:[{type:"text",text:a.id.text}]}}};if(e)Object.assign(i.fields,e.fields),(!a.child||!(a.child&&a.child.length))&&n.push(i);else if(!a.child||!(a.child&&a.child.length)){n.push(i);continue}a.child&&a.child.length&&c(a.child,i)}};c(y),await f.addRecords(n)}},g=async()=>{const I=await z();if(I==="粉丝页代理商"){const o=["fldogQk5yi","fld2NwOTxm","fldS9ktQOH","fldWfgfA2z"],f={id:"fldamqjgCi",fansName:"fldODZOISb",fansAds:"fld1JtRKJR",fansStatus:"fldZKS0Qrl"},p=await L(I);await T(p);const w=await M(d),y=c=>c?{id:c[0].id,text:c[0].text,type:"singleSelect"}:null;let n=w.records.map(c=>{const t=c.fields;return{fields:{[o[0]]:t[f.id],[o[1]]:t[f.fansName],[o[2]]:y(t[f.fansAds]),[o[3]]:y(t[f.fansStatus])}}});n=n.filter(c=>c.fields[o[1]]);let N={};n=n.reduce((c,t)=>(N[t.fields[o[1]][0].text]||(N[t.fields[o[1]][0].text]=c.push(t)),c),[]),await p.addRecords(n)}},F=async()=>{const I=await z();if(I==="广告账户统计"){const o=["正常使用中","正常待使用","申诉成功"],f=["fldrI191pn","fldZGEKDU2","fldNGkPjyc","fldmzjaJgX"],p={packName:"fld6PJoJmr",adsStatus:"fldIy5Lrqv"},w=await L(I);await T(w);const y=await M("广告账户"),n=[];let N=y.records.map(e=>{const a=e.fields;return{name:a[p.packName][0].text,status:a[p.adsStatus].text}});const c=e=>{let a=-1;return n.forEach((r,i)=>{r.name===e&&(a=i)}),a};N.forEach(e=>{const a=e.name,r=e.status,i=o.includes(r),_=c(a);if(e.all=e.all+1,_===-1){const u={name:a,all:1,normal:0,limitation:0};i?u.normal=1:u.limitation=1,n.push(u)}else n[_].all=n[_].all+1,i?n[_].normal=n[_].normal+1:n[_].limitation=n[_].limitation+1});const t=n.map(e=>({fields:{[f[0]]:[{type:"text",text:e.name}],[f[1]]:[{type:"text",text:`${e.all}`}],[f[2]]:[{type:"text",text:`${e.normal}`}],[f[3]]:[{type:"text",text:`${e.limitation}`}]}}));await w.addRecords(t)}};G(async()=>{const I=await S(s.pack.tableName,s.pack.name);m.value=I.map(o=>o.value[0].text)});const P=K();return{formData:l,tableMetaList:m,addRecord:E,check:g,total:F,toBatch:()=>{P.push({name:"insert"})}}}};function nt(l,m,d,s,k,E){const g=j,F=Z;return V(),H(F,{ref:"form",class:"form",model:s.formData,"label-position":"top"},{default:D(()=>[b(g,{type:"primary",plain:"",size:"large",onClick:s.addRecord},{default:D(()=>[v("修改"+W(s.formData.value)+"数据源",1)]),_:1},8,["onClick"]),b(g,{type:"primary",plain:"",size:"large",onClick:s.check},{default:D(()=>[v("粉丝页代理商")]),_:1},8,["onClick"]),b(g,{type:"primary",plain:"",size:"large",onClick:s.total},{default:D(()=>[v("广告账户统计")]),_:1},8,["onClick"]),b(g,{type:"primary",plain:"",size:"large",onClick:s.toBatch},{default:D(()=>[v("批量插入数据的操作")]),_:1},8,["onClick"])]),_:1},8,["model"])}const lt=J(st,[["render",nt],["__scopeId","data-v-8be3c7b1"]]);const C=l=>(X("data-v-14c47382"),l=l(),Y(),l),ot=C(()=>B("h4",null,"Lark数据表的更改",-1)),ct=C(()=>B("h4",null,"BI录入测试链接生成",-1)),it=C(()=>B("h4",null,"城市英文名称检索",-1)),dt=C(()=>B("h4",null,"2FA",-1)),rt=C(()=>B("h4",null,"Facebook 兴趣词工具",-1)),ft={__name:"lark",setup(l){const m=K(),d=()=>{const s=m.resolve({name:"search"});window.open(s.href,"_blank")};return(s,k)=>{const E=j;return V(),$("main",null,[ot,b(lt),ct,b(tt),it,b(at),dt,b(et),rt,b(E,{type:"primary",plain:"",size:"large",onClick:d},{default:D(()=>[v("前往工具页面")]),_:1})])}}},It=J(ft,[["__scopeId","data-v-14c47382"]]);export{It as default};

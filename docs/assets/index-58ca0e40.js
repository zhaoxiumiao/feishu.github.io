/* empty css               *//* empty css                  */import{p as j}from"./index-cf52f176.js";import{_ as K,E as J,a as U,b as W,c as $,d as X,r as L,o as Y,e as tt,f as q,g as et,w as N,h,i as C,t as at,j as v,k as P,l as st,p as G,m as Q,u as nt,n as lt}from"./index-6189d77c.js";import{P as ot}from"./Parser-c79df6cf.js";import{A as it,C as ct,T as dt}from"./TwoFA-13a9d346.js";const T=async n=>await j.base.getTableByName(n),B=async(n,d)=>await(await(await T(n)).getFieldByName(d)).getFieldValueList(),V=async(n,d)=>{const b=await n.getRecordIdList();b&&b.length&&await n.deleteRecords(b.slice(0,5e3))},M=async()=>{const n=await j.base.getSelection();return await(await j.base.getTableById(n.tableId)).getName()},Z=async(n,d)=>await(await T(n)).getRecords({pageSize:5e3}),rt={components:{ElButton:J,ElForm:U,ElFormItem:W,ElSelect:$,ElOption:X},setup(){const n=L(""),d=L(""),b=L(""),i=L([]);L([]),L({});const D="资产状态总览",l={pack:{name:"包ID",status:"包状态",nameId:"xxx",statusId:"xxx",tableName:"app",childName:"bm"},bm:{name:"BMID",status:"BM状态",tableName:"BM",parent:"pack",childName:"ads"},ads:{name:"广告账户ID",status:"广告账户状态",tableName:"广告账户",parent:"bm",childName:"fans",packId:"包ID"},fans:{name:"粉丝页名称",status:"粉丝页的状态",tableName:"广告账户粉丝页",parent:"ads",adsTableName:"广告账户粉丝页",adsId:"",childName:"person"},person:{name:"个人号ID",status:"个人号的状态",tableName:"粉丝页个人号",parent:"fans",childName:""}};let x={pack:[{}]};const O=async()=>{if(await M()===D){let I=function(t){t.forEach(a=>{if(a.childName){a.child=[];for(let e of x[a.childName])if(a.id.text==e.parentId.text){if(e.packId&&a.parentId.text!==e.packId.text)continue;e.adsId?f.forEach(_=>{_.fans==e.id.text&&_.ads==a.parentId.text&&a.child.push(e)}):a.child.push(e)}I(a.child)}})};const o=["fldamqjgCi","fldxs3m5oK","flds2sw1zl","fldpZOIUJs","fldYDmwkFW","fldOtNEMD7","fldODZOISb","fldZKS0Qrl","fldlPGwOHc","fldU13dDiD"],c=await T(D);await V(c),l.pack.nameId=o[0];let r=0;for(let t in l){if(r++,t=="pack"){l[t].statusId=o[r];continue}l[t].nameId=o[r],r++,l[t].statusId=o[r]}let f=[];for(let t in l){const a=await B(l[t].tableName,l[t].name),e=await B(l[t].tableName,l[t].status);let _=null,p=null;const g=l[t].parent;g&&(_=await B(l[t].tableName,l[g].name)),t=="ads"&&(p=await B(l[t].tableName,l[t].packId)),x[t]=[];for(let w=0;w<a.length;w++)for(let S=0;S<e.length;S++)if(a[w].record_id==e[S].record_id){let A={record_id:a[w].record_id,id:a[w].value[0],status:e[S].value instanceof Array?e[S].value[0]:e[S].value,nameId:l[t].nameId,statusId:l[t].statusId,childName:l[t].childName};if(p)for(let k=0;k<p.length;k++)p[k].record_id==a[w].record_id&&(A.packId=p[k].value[0]);if(_)for(let k=0;k<_.length;k++)_[k].record_id==a[w].record_id&&(A.parentId=_[k].value[0]);x[t].push(A)}}const y=JSON.parse(JSON.stringify(x.pack)),s=[];I(y);const m=async(t,a)=>{for(const e of t){let p={fields:{...{[e.nameId]:[{type:"text",text:e.id.text}]}}};if(a)Object.assign(p.fields,a.fields),(!e.child||!(e.child&&e.child.length))&&s.push(p);else if(!e.child||!(e.child&&e.child.length)){s.push(p);continue}e.child&&e.child.length&&m(e.child,p)}};m(y),await c.addRecords(s)}},z=async()=>{const u=await M();if(u==="粉丝页代理商"){const o=["fldogQk5yi","fld2NwOTxm","fldS9ktQOH","fldWfgfA2z"],c={id:"fldamqjgCi",fansName:"fldODZOISb",fansAds:"fld1JtRKJR",fansStatus:"fldZKS0Qrl"},r=await T(u);await V(r);const f=await Z(D),y=m=>m?{id:m[0].id,text:m[0].text,type:"singleSelect"}:null;let s=f.records.map(m=>{const t=m.fields;return{fields:{[o[0]]:t[c.id],[o[1]]:t[c.fansName],[o[2]]:y(t[c.fansAds]),[o[3]]:y(t[c.fansStatus])}}});s=s.filter(m=>m.fields[o[1]]);let I={};s=s.reduce((m,t)=>(I[t.fields[o[1]][0].text]||(I[t.fields[o[1]][0].text]=m.push(t)),m),[]),await r.addRecords(s)}},R=async()=>{const u=await M();if(u==="广告账户统计"){const o=["正常使用中","正常待使用","申诉成功"],c=["fldrI191pn","fldZGEKDU2","fldNGkPjyc","fldmzjaJgX"],r={packName:"fld6PJoJmr",adsStatus:"fldIy5Lrqv"},f=await T(u);await V(f);const y=await Z("广告账户"),s=[];let I=y.records.map(a=>{const e=a.fields;return{name:e[r.packName][0].text,status:e[r.adsStatus].text}});const m=a=>{let e=-1;return s.forEach((_,p)=>{_.name===a&&(e=p)}),e};I.forEach(a=>{const e=a.name,_=a.status,p=o.includes(_),g=m(e);if(a.all=a.all+1,g===-1){const w={name:e,all:1,normal:0,limitation:0};p?w.normal=1:w.limitation=1,s.push(w)}else s[g].all=s[g].all+1,p?s[g].normal=s[g].normal+1:s[g].limitation=s[g].limitation+1});const t=s.map(a=>({fields:{[c[0]]:[{type:"text",text:a.name}],[c[1]]:[{type:"text",text:`${a.all}`}],[c[2]]:[{type:"text",text:`${a.normal}`}],[c[3]]:[{type:"text",text:`${a.limitation}`}]}}));await f.addRecords(t)}},E=()=>{function u(c){const r=[];let f={};const y=new ot({onopentag(s,I){s==="a"&&I&&(f.id=I.href.split("/")[3])},ontext(s){s.includes("编号：")||(f.name=s,r.push(f),f={})},onclosetag(s){}});return y.write(c),y.end(),r}const o=u(n.value);d.value=o,console.log(o,"ids")},H=async()=>{const u=await M();if(u==="粉丝页的数据"&&d.value){const o=await T(u),c=["fldKyTNThM","fldqyffZcM","fldGDgtbfT"],r=d.value.map(f=>({fields:{[c[0]]:[{type:"text",text:f.name}],[c[1]]:[{type:"text",text:`${f.id}`}],[c[2]]:[{type:"text",text:`https://www.facebook.com/profile.php?id=${f.id}`}]}}));await o.addRecords(r)}};return Y(async()=>{const u=await B(l.pack.tableName,l.pack.name);i.value=u.map(o=>o.value[0].text)}),{formData:b,tableMetaList:i,addRecord:O,check:z,total:R,html:n,data:d,sub:E,insert:H}}},ft=n=>(G("data-v-2a540808"),n=n(),Q(),n),mt=ft(()=>v("h4",null,"粉丝页数据表批量插入",-1)),pt={class:"TwoFA"};function ut(n,d,b,i,D,l){const x=J,O=st,z=U,R=tt("trim");return q(),et(z,{ref:"form",class:"form",model:i.formData,"label-position":"top"},{default:N(()=>[h(x,{type:"primary",plain:"",size:"large",onClick:i.addRecord},{default:N(()=>[C("修改"+at(i.formData.value)+"数据源",1)]),_:1},8,["onClick"]),h(x,{type:"primary",plain:"",size:"large",onClick:i.check},{default:N(()=>[C("粉丝页代理商")]),_:1},8,["onClick"]),h(x,{type:"primary",plain:"",size:"large",onClick:i.total},{default:N(()=>[C("广告账户统计")]),_:1},8,["onClick"]),mt,v("div",pt,[P(h(O,{modelValue:i.html,"onUpdate:modelValue":d[0]||(d[0]=E=>i.html=E),rows:2,type:"textarea",placeholder:"Please input"},null,8,["modelValue"]),[[R]]),h(x,{type:"primary",plain:"",size:"large",onClick:i.sub},{default:N(()=>[C("提取信息")]),_:1},8,["onClick"]),P(h(O,{modelValue:i.data,"onUpdate:modelValue":d[1]||(d[1]=E=>i.data=E),rows:2,type:"textarea",placeholder:"Please input"},null,8,["modelValue"]),[[R]]),h(x,{onClick:i.insert,type:"primary",plain:"",size:"large"},{default:N(()=>[C("插入")]),_:1},8,["onClick"])])]),_:1},8,["model"])}const _t=K(rt,[["render",ut],["__scopeId","data-v-2a540808"]]);const F=n=>(G("data-v-b6c542ba"),n=n(),Q(),n),ht=F(()=>v("h4",null,"数据表的更改",-1)),bt=F(()=>v("h4",null,"BI录入测试链接生成",-1)),wt=F(()=>v("h4",null,"城市英文名称检索",-1)),xt=F(()=>v("h4",null,"2FA",-1)),yt=F(()=>v("h4",null,"Facebook 兴趣词工具",-1)),It={__name:"index",setup(n){const d=nt(),b=()=>{const i=d.resolve({name:"search"});window.open(i.href,"_blank")};return(i,D)=>{const l=J;return q(),lt("main",null,[ht,h(_t),bt,h(it),wt,h(ct),xt,h(dt),yt,h(l,{type:"primary",plain:"",size:"large",onClick:b},{default:N(()=>[C("前往工具页面")]),_:1})])}}},Lt=K(It,[["__scopeId","data-v-b6c542ba"]]);export{Lt as default};
